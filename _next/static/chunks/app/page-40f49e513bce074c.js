(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8716:function(e,t,n){Promise.resolve().then(n.bind(n,8631))},8631:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(7437),a=n(2265);class o{get provider(){return this.remotePaymentMethod.name}get label(){return"cash"===this.provider?"Pay in ".concat(this.provider):"Pay with ".concat(this.provider)}get isDefaultMethod(){return"cash"===this.provider}constructor(e){this.remotePaymentMethod=e}}var i=n(9772);let c=i.z.array(i.z.object({name:i.z.string()})),s=async e=>{let t=await e("https://5a2f495fa871f00012678d70.mockapi.io/api/payment-methods?countryCode=AU");return function(e){if(0===e.length)return[];let t=e.map(e=>new o(e));return t.push(new o({name:"cash"})),t}(c.parse(await t.json()))},u=e=>{let{options:t}=e;return(0,r.jsx)(r.Fragment,{children:t.map(e=>(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"radio",name:"payment",value:e.provider,defaultChecked:e.isDefaultMethod}),(0,r.jsx)("span",{children:e.label})]},e.provider))})},h=(e,t)=>{let[n,r]=(0,a.useState)(!1),{total:o,tip:i}=(0,a.useMemo)(()=>({total:n?t.getRoundUpAmount(e):e,tip:t.getTip(e)}),[e,n,t]);return{total:o,tip:i,agreeToDonate:n,updateAgreeToDonate:()=>{r(e=>!e)}}},l=e=>{let{onChange:t,checked:n,content:a}=e;return(0,r.jsx)("div",{children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",onChange:t,checked:n}),(0,r.jsx)("p",{children:a})]})})},d=e=>{let{amount:t,fetchAdapter:n,strategy:o}=e,{paymentMethods:i}=function(e){let[t,n]=(0,a.useState)([]);return(0,a.useEffect)(()=>{s(e).then(e=>n(e))},[e]),{paymentMethods:t}}(n),{total:c,tip:d,agreeToDonate:f,updateAgreeToDonate:g}=h(t,o);return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Payment"}),(0,r.jsx)(u,{options:i}),(0,r.jsx)(l,{onChange:g,checked:f,content:p(f,d,o)}),(0,r.jsx)("button",{children:m(o,c)})]})},p=(e,t,n)=>e?"Thanks for your donation.":"I would like to donate ".concat(n.currencySign).concat(t," to charity."),m=(e,t)=>"".concat(e.currencySign).concat(t);class f{get currencySign(){return"\xa5"}getRoundUpAmount(e){return 100*Math.floor(e/100+1)}getTip(e){return parseFloat((this.getRoundUpAmount(e)-e).toPrecision(10))}}var g=n(8518),j=n.n(g);function x(){return(0,r.jsxs)("main",{className:j().main,children:[(0,r.jsx)("h1",{children:"My app"}),(0,r.jsx)("section",{children:(0,r.jsx)(d,{amount:10,fetchAdapter:fetch,strategy:new f})})]})}},8518:function(e){e.exports={main:"page_main__nw1Wk"}}},function(e){e.O(0,[851,772,971,23,744],function(){return e(e.s=8716)}),_N_E=e.O()}]);